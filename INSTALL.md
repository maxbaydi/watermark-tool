# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ - –ú–∞—Å—Ç–µ—Ä –í–æ–¥—è–Ω—ã—Ö –ó–Ω–∞–∫–æ–≤

## üéØ –û–±–∑–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ú–∞—Å—Ç–µ—Ä –í–æ–¥—è–Ω—ã—Ö –ó–Ω–∞–∫–æ–≤** - —ç—Ç–æ –≤–µ–±-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è –≤–æ–¥—è–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –¢–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –≤–æ–¥—è–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∏ CMYK –∏ WebP —Ñ–æ—Ä–º–∞—Ç–æ–≤
- –ü–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **PHP 7.4+** —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏:
  - `imagick` (ImageMagick)
  - `zip` (ZipArchive)
  - `mbstring` (–¥–ª—è UTF-8)
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä** (Apache, Nginx –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PHP —Å–µ—Ä–≤–µ—Ä)
- **–ü–∞–ø–∫–∞ temp** —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ –∑–∞–ø–∏—Å—å (777)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **GD** (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **–ú–æ–¥—É–ª—å mod_rewrite** (–¥–ª—è Apache)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

#### Ubuntu/Debian:
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
sudo apt install php php-imagick php-zip php-mbstring php-gd

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
php -m | grep -E "(imagick|zip|mbstring|gd)"
```

#### CentOS/RHEL:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PHP –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
sudo yum install php php-imagick php-zip php-mbstring php-gd

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
php -m | grep -E "(imagick|zip|mbstring|gd)"
```

#### Windows (XAMPP/WAMP):
1. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ XAMPP –∏–ª–∏ WAMP
2. –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `php.ini`
3. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏:
   ```ini
   extension=imagick
   extension=zip
   extension=mbstring
   extension=gd
   ```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
cp -r watermark-master /var/www/html/

# 2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É temp –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
mkdir -p temp
chmod 777 temp

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –ø–∞–ø–∫—É fonts
chmod 755 fonts
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

#### Apache:
```apache
<VirtualHost *:80>
    ServerName watermark.local
    DocumentRoot /var/www/html/watermark-master
    
    <Directory /var/www/html/watermark-master>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
```

#### Nginx:
```nginx
server {
    listen 80;
    server_name watermark.local;
    root /var/www/html/watermark-master;
    index index.html index.php;
    
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }
}
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª:**
   ```
   http://your-domain/test_watermark.php
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - ‚úÖ ImageMagick —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –ü–∞–ø–∫–∞ temp –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
   - ‚úÖ –®—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ PNG, JPG, WebP

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã:

1. **–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
   ```
   http://your-domain/test_watermark.php
   ```

2. **–¢–µ—Å—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è:**
   ```
   http://your-domain/test_dragging.html
   ```

3. **–¢–µ—Å—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏:**
   ```
   http://your-domain/test_transparency.php
   ```

4. **–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```
   http://your-domain/index.html
   ```

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "ImageMagick –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
```bash
# Ubuntu/Debian
sudo apt install php-imagick
sudo systemctl restart apache2

# –ü—Ä–æ–≤–µ—Ä–∫–∞
php -m | grep imagick
```

### –û—à–∏–±–∫–∞ "–ü–∞–ø–∫–∞ temp –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤
mkdir -p temp
chmod 777 temp
chown www-data:www-data temp  # –¥–ª—è Apache
```

### –û—à–∏–±–∫–∞ "–®—Ä–∏—Ñ—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è"
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–∫–∏ fonts
ls -la fonts/

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤
chmod 755 fonts
chmod 644 fonts/*.ttf fonts/*.otf
```

### –û—à–∏–±–∫–∞ "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
ls -la *.php *.html

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 644 *.php *.html
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –≤ php.ini
memory_limit = 512M
max_execution_time = 300
upload_max_filesize = 50M
post_max_size = 50M
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
watermark-master/
‚îú‚îÄ‚îÄ index.html              # –ì–ª–∞–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ process.php             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ fonts.css.php           # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä CSS —à—Ä–∏—Ñ—Ç–æ–≤
‚îú‚îÄ‚îÄ get_fonts.php           # API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —à—Ä–∏—Ñ—Ç–æ–≤
‚îú‚îÄ‚îÄ clean_temp.php          # –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ test_watermark.php      # –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ test_dragging.html      # –¢–µ—Å—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ test_transparency.php   # –¢–µ—Å—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ fonts/                  # –ü–∞–ø–∫–∞ —Å–æ —à—Ä–∏—Ñ—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ arialmt.ttf
‚îÇ   ‚îú‚îÄ‚îÄ RobotoCondensed-Regular.ttf
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ temp/                   # –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ CHANGELOG.md            # –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ INSTALL.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–∞–ø–∫–µ temp:**
   ```apache
   <Directory "/var/www/html/watermark-master/temp">
       Deny from all
   </Directory>
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ª–∏–º–∏—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏:**
   ```ini
   upload_max_filesize = 10M
   post_max_size = 10M
   max_file_uploads = 10
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS:**
   ```apache
   RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
   ```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤:**
   ```apache
   <FilesMatch "\.(ttf|otf)$">
       ExpiresActive On
       ExpiresDefault "access plus 1 year"
   </FilesMatch>
   ```

2. **–°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   ```apache
   <IfModule mod_deflate.c>
       AddOutputFilterByType DEFLATE image/png image/jpeg image/webp
   </IfModule>
   ```

3. **–û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:**
   ```bash
   # –î–æ–±–∞–≤—å—Ç–µ –≤ cron
   0 */6 * * * find /var/www/html/watermark-master/temp -type f -mtime +1 -delete
   ```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PHP –º–æ–¥—É–ª–µ–π
php -m

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ ImageMagick
php -r "echo (new Imagick())->getVersion()['versionString'];"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la temp/ fonts/

# –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -rf temp/*
```

### –õ–æ–≥–∏ –æ—à–∏–±–æ–∫:
- **Apache:** `/var/log/apache2/error.log`
- **Nginx:** `/var/log/nginx/error.log`
- **PHP:** `/var/log/php_errors.log`

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

- [ ] PHP 7.4+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ imagick —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ zip —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ mbstring —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –ü–∞–ø–∫–∞ temp —Å–æ–∑–¥–∞–Ω–∞ —Å –ø—Ä–∞–≤–∞–º–∏ 777
- [ ] –ü–∞–ø–∫–∞ fonts —Å–æ–¥–µ—Ä–∂–∏—Ç —à—Ä–∏—Ñ—Ç—ã
- [ ] –í–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] test_watermark.php –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ ‚úÖ
- [ ] –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** `http://your-domain/index.html`
**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** `http://your-domain/test_watermark.php`

---

*–ú–∞—Å—Ç–µ—Ä –í–æ–¥—è–Ω—ã—Ö –ó–Ω–∞–∫–æ–≤ v2.0.0*
*–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 30 –∏—é–ª—è 2025*